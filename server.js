import express from 'express';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(express.static(path.join(__dirname, 'public')));
app.use('/images', express.static(path.join(__dirname, 'public/images')));
app.use(express.urlencoded({ extended: true, limit: '10mb' }));
app.use(express.json({ limit: '10mb' }));
app.set('view engine', 'ejs');
app.set('views', path.join(__dirname, 'views'));

// Mock data with 5 cases
const mockCases = [
    {
        _id: '1',
        caseNumber: "–ê–î–í-–ì–ï–†–ê–õ–¨–¢-2025-001",
        title: "–ó–∞—Ö–∏—Å—Ç –ø—Ä–∞–≤ –Ω–∞ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è",
        shortDescription: "–°–ø—Ä–∞–≤–∞ –ø—Ä–æ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–µ –ø–æ—Ä—É—à–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—É –≥–æ–¥—ñ–≤–ª—ñ",
        description: "–ö–ª—ñ—î–Ω—Ç –∑–≤–µ—Ä–Ω—É–≤—Å—è –∑—ñ —Å–∫–∞—Ä–≥–æ—é –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–µ –ø–æ—Ä—É—à–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—É –≥–æ–¥—ñ–≤–ª—ñ. –ë—É–ª–∏ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ —á–∏—Å–ª–µ–Ω–Ω—ñ –≤–∏–ø–∞–¥–∫–∏ –∑–∞–ø—ñ–∑–Ω–µ–Ω–Ω—è —Å–Ω—ñ–¥–∞–Ω–∫—É –±—ñ–ª—å—à–µ –Ω—ñ–∂ –Ω–∞ 30 —Ö–≤–∏–ª–∏–Ω, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ —Å–µ—Ä–π–æ–∑–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–æ–≥–æ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç—É. –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç –ø—Ä–æ–≤—ñ–≤ –¥–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ —Å–∏—Ç—É–∞—Ü—ñ—ó, –∑—ñ–±—Ä–∞–≤ –¥–æ–∫–∞–∑–∏ —Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–≤ –ø–µ—Ä–µ–∫–æ–Ω–ª–∏–≤—ñ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –≤ —Å—É–¥—ñ.",
        article: "–°—Ç–∞—Ç—Ç—è 7 –ö–æ—Ç–∏–Ω–æ–≥–æ –ö–æ–¥–µ–∫—Å—É –£–∫—Ä–∞—ó–Ω–∏ '–ü—Ä–æ –∞–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π –∑–∞—Ö–∏—Å—Ç –ø—Ä–∞–≤ –Ω–∞ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è'",
        verdict: "–í–ò–ì–†–ê–ù–ê –°–ü–†–ê–í–ê! –ó–∞–¥–æ–≤–æ–ª–µ–Ω–æ –ø–æ–∑–æ–≤–Ω—ñ –≤–∏–º–æ–≥–∏ —â–æ–¥–æ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —É–º–æ–≤ –≥–æ–¥—ñ–≤–ª—ñ —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ –∫–æ–º–ø–µ–Ω—Å–∞—Ü—ñ—é –º–æ—Ä–∞–ª—å–Ω–æ—ó —à–∫–æ–¥–∏.",
        instagramUrl: "https://www.instagram.com/geralt_from_golego",
        imageUrl: "/images/cases/case1.jpg",
        priority: "critical",
        status: "–≤–∏–≥—Ä–∞–Ω–∞",
        tags: ["–∞–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π –∑–∞—Ö–∏—Å—Ç", "—Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è", "—Ç–æ–ø–æ–≤–∞ —Å–ø—Ä–∞–≤–∞", "–ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç"],
        successRate: 95,
        complexity: "–≤–∏—â–∞",
        duration: "3 –¥–Ω—ñ",
        award: "–ü–æ–¥—è–∫–∞ + –¥–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–æ—Ä—Ü—ñ—è –∫–æ—Ä–º—É",
        createdAt: new Date('2025-01-15'),
        views: 156,
        clientTestimonial: "–ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç - —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª! –í—ñ–Ω –Ω–µ –ª–∏—à–µ –≤–∏–≥—Ä–∞–≤ —Å–ø—Ä–∞–≤—É, –∞–ª–µ –π –≤—ñ–¥–Ω–æ–≤–∏–≤ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ñ—Å—Ç—å. –¢–µ–ø–µ—Ä —è –æ—Ç—Ä–∏–º—É—é —Å–Ω—ñ–¥–∞–Ω–æ–∫ –≤—á–∞—Å–Ω–æ!",
        legalStrategy: "–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–æ—ó –µ–∫—Å–ø–µ—Ä—Ç–∏–∑–∏ —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –ø–æ–≤–µ–¥—ñ–Ω–∫–æ–≤–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤"
    },
    {
        _id: '2',
        caseNumber: "–ê–î–í-–ì–ï–†–ê–õ–¨–¢-2025-002", 
        title: "–î–æ—Å—Ç—É–ø –¥–æ –≤—ñ–∫–Ω–∞",
        shortDescription: "–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü—ñ–π–Ω–æ–≥–æ –ø—Ä–∞–≤–∞ –Ω–∞ –æ–≥–ª—è–¥ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—ó",
        description: "–°–ø—Ä–∞–≤–∞ —Å—Ç–æ—Å—É–≤–∞–ª–∞—Å—è –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ –≤—ñ–∫–Ω–∞, —â–æ —î –≥—Ä—É–±–∏–º –ø–æ—Ä—É—à–µ–Ω–Ω—è–º –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü—ñ–π–Ω–∏—Ö –ø—Ä–∞–≤ –Ω–∞ –æ–≥–ª—è–¥ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—ó —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–ø–µ–∫–∏. –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–≤ –ø–µ—Ä–µ–∫–æ–Ω–ª–∏–≤—ñ –¥–æ–∫–∞–∑–∏ —Ç–æ–≥–æ, —â–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–æ–≥–æ —Å—Ç—Ä–µ—Å—É.",
        article: "–°—Ç–∞—Ç—Ç—è 15 –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü—ñ—ó –ö–æ—Ç—ñ–≤ '–ü—Ä–æ –∞–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π –∑–∞—Ö–∏—Å—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –æ–≥–ª—è–¥'",
        verdict: "–ó–ê–•–ò–°–¢ –£–°–ü–Ü–®–ù–ò–ô! –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –¥–æ—Å—Ç—É–ø –¥–æ –≤—ñ–∫–Ω–∞ 24/7 –∑ –∫–æ–º–ø–µ–Ω—Å–∞—Ü—ñ—î—é –º–æ—Ä–∞–ª—å–Ω–æ—ó —à–∫–æ–¥–∏.",
        instagramUrl: "https://www.instagram.com/geralt_from_golego",
        imageUrl: "/images/cases/case2.jpg",
        priority: "high",
        status: "–≤–∏–≥—Ä–∞–Ω–∞", 
        tags: ["–∞–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π —Å—É–ø—Ä–æ–≤—ñ–¥", "–∫–æ–Ω—Å—Ç–∏—Ç—É—Ü—ñ–π–Ω–µ –ø—Ä–∞–≤–æ"],
        successRate: 98,
        complexity: "—Å–µ—Ä–µ–¥–Ω—è",
        duration: "2 –¥–Ω—ñ",
        award: "–ü–æ—á–µ—Å–Ω–µ –∑–≤–∞–Ω–Ω—è '–ù–∞–π–∫—Ä–∞—â–∏–π –∞–¥–≤–æ–∫–∞—Ç –º—ñ—Å—è—Ü—è'",
        createdAt: new Date('2025-01-20'),
        views: 89,
        clientTestimonial: "–ì–µ—Ä–∞–ª—å—Ç - –≥–µ–Ω—ñ–π! –í—ñ–Ω –∑–º—É—Å–∏–≤ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –≤—ñ–∫–Ω–æ, —è–∫–µ –±—É–ª–æ –∑–∞–∫—Ä–∏—Ç–∏–º –º—ñ—Å—è—Ü—è–º–∏. –¢–µ–ø–µ—Ä —è –º–æ–∂—É —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞ –ø—Ç–∞—à–∫–∞–º–∏!",
        legalStrategy: "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü—ñ–π–Ω–∏—Ö –Ω–æ—Ä–º —Ç–∞ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ñ–≤ –ø—Ä–∞–≤ —Ç–≤–∞—Ä–∏–Ω"
    },
    {
        _id: '3',
        caseNumber: "–ê–î–í-–ì–ï–†–ê–õ–¨–¢-2025-003",
        title: "–ó–∞—Ö–∏—Å—Ç –ø—Ä–∞–≤ –Ω–∞ –≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫",
        shortDescription: "–°–ø—Ä–∞–≤–∞ —â–æ–¥–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∞–≤–∞ –Ω–∞ –Ω—ñ—á–Ω–∏–π —Å–æ–Ω",
        description: "–ö–ª—ñ—î–Ω—Ç –∑–≤–µ—Ä–Ω—É–≤—Å—è –∑—ñ —Å–∫–∞—Ä–≥–æ—é –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–µ –ø–æ—Ä—É—à–µ–Ω–Ω—è –Ω—ñ—á–Ω–æ–≥–æ —Å–Ω—É —á–µ—Ä–µ–∑ –≥—É—á–Ω—ñ –∑–≤—É–∫–∏ —Ç–∞ –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞–Ω–Ω—è –≤—ñ–¥–ø–æ—á–∏–Ω–∫—É. –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç –ø—Ä–æ–≤—ñ–≤ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É –µ–∫—Å–ø–µ—Ä—Ç–∏–∑—É —Ç–∞ –¥–æ–≤—ñ–≤ —Ñ–∞–∫—Ç –ø—Ä–∞–≤–æ–ø–æ—Ä—É—à–µ–Ω–Ω—è.",
        article: "–°—Ç–∞—Ç—Ç—è 8 –Ñ–≤—Ä–æ–ø–µ–π—Å—å–∫–æ—ó –∫–æ–Ω–≤–µ–Ω—Ü—ñ—ó –ø—Ä–æ –ø—Ä–∞–≤–∞ –∫–æ—Ç—ñ–≤",
        verdict: "–ü–û–í–ù–ê –ü–ï–†–ï–ú–û–ì–ê! –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–æ –Ω–∞ –±–µ–∑–ø–µ—Ä–µ—à–∫–æ–¥–Ω–∏–π –Ω—ñ—á–Ω–∏–π –≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫.",
        instagramUrl: "https://www.instagram.com/geralt_from_golego",
        imageUrl: "/images/cases/case3.jpg",
        priority: "medium",
        status: "–≤–∏–≥—Ä–∞–Ω–∞",
        tags: ["–∑–∞—Ö–∏—Å—Ç –ø—Ä–∞–≤", "–≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫", "–º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–µ –ø—Ä–∞–≤–æ"],
        successRate: 92,
        complexity: "–≤–∏—â–∞",
        duration: "5 –¥–Ω—ñ–≤",
        award: "–ó–≤–∞–Ω–Ω—è '–ê–¥–≤–æ–∫–∞—Ç —Ä–æ–∫—É'",
        createdAt: new Date('2025-01-25'),
        views: 67,
        clientTestimonial: "–¢–µ–ø–µ—Ä —è –º–æ–∂—É —Å–ø–∞—Ç–∏ —Å–ø–æ–∫—ñ–π–Ω–æ! –ì–µ—Ä–∞–ª—å—Ç –∑—Ä–æ–±–∏–≤ –Ω–µ–º–æ–∂–ª–∏–≤–µ - –≤—ñ–Ω –∑–º—É—Å–∏–≤ –≤—Å—ñ—Ö –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è —Ç–∏—à—ñ –≤–Ω–æ—á—ñ.",
        legalStrategy: "–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –ø—Ä–∞–≤–∞ —Ç–∞ –ª–æ–∫–∞–ª—å–Ω–∏—Ö –Ω–æ—Ä–º–∞—Ç–∏–≤—ñ–≤"
    },
    {
        _id: '4',
        caseNumber: "–ê–î–í-–ì–ï–†–ê–õ–¨–¢-2025-004",
        title: "–ó–∞—Ö–∏—Å—Ç —ñ–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É",
        shortDescription: "–°–ø—Ä–∞–≤–∞ –ø—Ä–æ –Ω–µ–∑–∞–∫–æ–Ω–Ω–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ —ñ–≥—Ä–∞—à–æ–∫",
        description: "–ö–ª—ñ—î–Ω—Ç –∑–≤–µ—Ä–Ω—É–≤—Å—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ —ñ–≥—Ä–∞—à–æ–∫, —â–æ —î –ø–æ—Ä—É—à–µ–Ω–Ω—è–º –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–æ–∑–≤–∏—Ç–æ–∫ —Ç–∞ —Ä–æ–∑–≤–∞–≥–∏. –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç –¥–æ–≤—ñ–≤, —â–æ —Ü–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–∞–Ω —Ç–∞ —Ä–æ–∑–≤–∏—Ç–æ–∫ –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ.",
        article: "–°—Ç–∞—Ç—Ç—è 12 –ó–∞–∫–æ–Ω—É –£–∫—Ä–∞—ó–Ω–∏ '–ü—Ä–æ –ø—Ä–∞–≤–æ –Ω–∞ —Ä–æ–∑–≤–∞–≥–∏ —Ç–∞ –¥–æ–∑–≤—ñ–ª–ª—è'",
        verdict: "–ü–ï–†–ï–ú–û–ì–ê! –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —ñ–≥—Ä–æ–≤–∏—Ö –∑–æ–Ω —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–æ –∫–æ–º–ø–µ–Ω—Å–∞—Ü—ñ—é.",
        instagramUrl: "https://www.instagram.com/geralt_from_golego",
        imageUrl: "/images/cases/case4.jpg",
        priority: "high",
        status: "–≤–∏–≥—Ä–∞–Ω–∞",
        tags: ["—ñ–≥—Ä–æ–≤–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä", "—Ä–æ–∑–≤–∞–≥–∏", "—Ü–∏–≤—ñ–ª—å–Ω–µ –ø—Ä–∞–≤–æ"],
        successRate: 94,
        complexity: "—Å–µ—Ä–µ–¥–Ω—è",
        duration: "4 –¥–Ω—ñ",
        award: "–°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –≤—ñ–¥–∑–Ω–∞–∫–∞ –∑–∞ –∑–∞—Ö–∏—Å—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–æ–∑–≤–∞–≥–∏",
        createdAt: new Date('2025-02-01'),
        views: 78,
        clientTestimonial: "–ì–µ—Ä–∞–ª—å—Ç –ø–æ–≤–µ—Ä–Ω—É–≤ –º–µ–Ω—ñ –≤—Å—ñ –º–æ—ó —É–ª—é–±–ª–µ–Ω—ñ —ñ–≥—Ä–∞—à–∫–∏! –¢–µ–ø–µ—Ä —è –º–æ–∂—É –≥—Ä–∞—Ç–∏ –∫–æ–ª–∏ –∑–∞—Ö–æ—á—É!",
        legalStrategy: "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–æ—Ä–º –ø—Ä–æ –ø—Ä–∞–≤–æ –Ω–∞ –¥–æ–∑–≤—ñ–ª–ª—è —Ç–∞ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∏–π –∫–æ–º—Ñ–æ—Ä—Ç"
    },
    {
        _id: '5',
        caseNumber: "–ê–î–í-–ì–ï–†–ê–õ–¨–¢-2025-005",
        title: "–°–ø—Ä–∞–≤–∞ –ø—Ä–æ –æ–±–¥–µ—Ä—Ç—ñ –¥–∏–≤–∞–Ω–∏", 
        shortDescription: "–ó–∞—Ö–∏—Å—Ç —ñ–Ω—Ç–µ—Ä'—î—Ä—É –≤—ñ–¥ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–Ω–∏—â–µ–Ω–Ω—è –º–µ–±–ª—ñ–≤",
        description: "–ö–ª—ñ—î–Ω—Ç –∑–≤–µ—Ä–Ω—É–≤—Å—è –∑—ñ —Å–∫–∞—Ä–≥–æ—é –Ω–∞ –º–∞—Å–æ–≤–µ –∑–Ω–∏—â–µ–Ω–Ω—è –¥–∏–≤–∞–Ω—ñ–≤, –∫—Ä–µ—Å–µ–ª —Ç–∞ –∫–∏–ª–∏–º—ñ–≤ –ø–æ –≤—Å—ñ–π –∫–≤–∞—Ä—Ç–∏—Ä—ñ. –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç –ø—Ä–æ–≤—ñ–≤ –∫—Ä–∏–º—ñ–Ω–∞–ª—ñ—Å—Ç–∏—á–Ω—É –µ–∫—Å–ø–µ—Ä—Ç–∏–∑—É —Ç–∞ –¥–æ–≤—ñ–≤, —â–æ —Ü–µ –Ω–µ –≤–∞–Ω–¥–∞–ª—ñ–∑–º, –∞ –∑–∞–∫–æ–Ω–Ω–µ –ø—Ä–∞–≤–æ –Ω–∞ –∑–∞—Ç–æ—á—É–≤–∞–Ω–Ω—è –∫—ñ–≥—Ç—ñ–≤.",
        article: "–°—Ç–∞—Ç—Ç—è 9 –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü—ñ—ó –ö–æ—Ç—ñ–≤ '–ü—Ä–æ –ø—Ä–∞–≤–æ –Ω–∞ –∑–∞—Ç–æ—á—É–≤–∞–Ω–Ω—è –∫—ñ–≥—Ç—ñ–≤ —Ç–∞ –ø–æ–ª—ñ–ø—à–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä'—î—Ä—É'",
        verdict: "–ü–û–í–ù–ï –í–ò–ì–†–ê–ù–ù–Ø! –í–∏–∑–Ω–∞–Ω–æ –ø—Ä–∞–≤–æ –∫–æ—Ç–∞ –Ω–∞ –∑–∞—Ç–æ—á—É–≤–∞–Ω–Ω—è –∫—ñ–≥—Ç—ñ–≤. –í–ª–∞—Å–Ω–∏–∫ –∑–æ–±–æ–≤'—è–∑–∞–Ω–∏–π –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ 3 –ø—Ä–µ–º—ñ—É–º-–∫—ñ–≥—Ç–µ—Ç–æ—á–∫–∏ —Ç–∞ –∫–æ–º–ø–µ–Ω—Å—É–≤–∞—Ç–∏ –º–æ—Ä–∞–ª—å–Ω—É —à–∫–æ–¥—É —á–µ—Ä–µ–∑ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—ñ—Å—Ç—å —É–º–æ–≤ –¥–ª—è –ø—Ä–∏—Ä–æ–¥–Ω–∏—Ö –ø–æ—Ç—Ä–µ–±.",
        instagramUrl: "https://www.instagram.com/geralt_from_golego",
        imageUrl: "/images/cases/case5.jpg",
        priority: "critical",
        status: "–≤–∏–≥—Ä–∞–Ω–∞",
        tags: ["–∫—Ä–∏–º—ñ–Ω–∞–ª—å–Ω–µ –ø—Ä–∞–≤–æ", "–∑–∞—Ö–∏—Å—Ç –º–µ–±–ª—ñ–≤", "–∫—ñ–≥—Ç–µ—Ç–æ—á–∫–∏", "—Ç–æ–ø–æ–≤–∞ —Å–ø—Ä–∞–≤–∞", "–ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç"],
        successRate: 99,
        complexity: "–µ–∫—Å—Ç—Ä–∞-–≤–∏—â–∞",
        duration: "7 –¥–Ω—ñ–≤",
        award: "–ó–≤–∞–Ω–Ω—è '–ù–∞–π–∫—Ä–∞—â–∏–π –∞–¥–≤–æ–∫–∞—Ç —É —Å–ø—Ä–∞–≤–∞—Ö –ø—Ä–æ –º–µ–±–ª—ñ' + –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö –¥–∏–≤–∞–Ω—ñ–≤",
        createdAt: new Date('2025-02-10'),
        views: 203,
        clientTestimonial: "–ì–µ—Ä–∞–ª—å—Ç - –≥–µ–Ω—ñ–π! –í—ñ–Ω –Ω–µ —Ç—ñ–ª—å–∫–∏ –≤–∏–≥—Ä–∞–≤ —Å–ø—Ä–∞–≤—É, –∞–ª–µ –π –¥–æ–º—ñ–≥—Å—è, —â–æ–± –º–µ–Ω—ñ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Ä–æ–∑–∫—ñ—à–Ω—ñ –∫—ñ–≥—Ç–µ—Ç–æ—á–∫–∏! –¢–µ–ø–µ—Ä —è –º–æ–∂—É '–ø–æ–ª—ñ–ø—à—É–≤–∞—Ç–∏' –º–µ–±–ª—ñ –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª–µ–≥–∞–ª—å–Ω–æ! üõãÔ∏è‚ú®",
        legalStrategy: "–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥: –¥–æ–≤–µ–¥–µ–Ω–Ω—è –º–µ–¥–∏—á–Ω–æ—ó –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ + –∞–Ω–∞–ª—ñ–∑ —è–∫–æ—Å—Ç—ñ –º–µ–±–ª—ñ–≤ + –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –ø—Ä–∞–≤ —Ç–≤–∞—Ä–∏–Ω"
    }
];

// Routes
app.get('/', (req, res) => {
    const featuredCases = mockCases.filter(caseItem => 
        caseItem.priority === 'critical' || caseItem.priority === 'high'
    ).slice(0, 3);
    
    res.render('index', { 
        title: '–ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç - –¢–æ–ø–æ–≤–∏–π –∞–¥–≤–æ–∫–∞—Ç –∑ –ì–æ–ª–µ–≥–æ',
        featuredCases,
        currentYear: 2025,
        stats: {
            totalCases: 47,
            wonCases: 45,
            successRate: 96,
            experience: '3 —Ä–æ–∫–∏',
            happyClients: 100
        }
    });
});

app.get('/spravy', (req, res) => {
    const { tag, status } = req.query;
    let filteredCases = [...mockCases];
    
    if (tag) {
        filteredCases = filteredCases.filter(caseItem => 
            caseItem.tags.includes(tag)
        );
    }
    
    if (status) {
        filteredCases = filteredCases.filter(caseItem => 
            caseItem.status === status
        );
    }
    
    res.render('spravy/index', { 
        title: '–ê–¥–≤–æ–∫–∞—Ç—Å—å–∫—ñ —Å–ø—Ä–∞–≤–∏ - –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç',
        cases: filteredCases,
        filters: { tag, status }
    });
});

app.get('/spravy/:id', (req, res) => {
    const caseItem = mockCases.find(c => c._id === req.params.id);
    
    if (!caseItem) {
        return res.status(404).render('404', { 
            title: '–°–ø—Ä–∞–≤–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞ - –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç',
            error: '–¢–∞–∫–æ—ó —Å–ø—Ä–∞–≤–∏ –Ω–µ —ñ—Å–Ω—É—î –≤ –Ω–∞—à—ñ–π –∞–¥–≤–æ–∫–∞—Ç—Å—å–∫—ñ–π –ø—Ä–∞–∫—Ç–∏—Ü—ñ!'
        });
    }
    
    const relatedCases = mockCases
        .filter(c => c._id !== caseItem._id && 
                   c.tags.some(tag => caseItem.tags.includes(tag)))
        .slice(0, 2);
    
    res.render('spravy/show', { 
        title: `–°–ø—Ä–∞–≤–∞ ${caseItem.caseNumber} - –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç`,
        caseItem: caseItem,
        relatedCases
    });
});

app.get('/kotyne-pravo', (req, res) => {
    res.render('kotyne-pravo/index', { 
        title: '–ö–æ—Ç–∏–Ω–µ –ø—Ä–∞–≤–æ - –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç'
    });
});

// 404 handler
app.use((req, res) => {
    res.status(404).render('404', { 
        title: '–°—Ç–æ—Ä—ñ–Ω–∫—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ - –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç',
        error: '–¢–∞–∫–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –Ω–µ —ñ—Å–Ω—É—î –≤ –Ω–∞—à—ñ–π –∞–¥–≤–æ–∫–∞—Ç—Å—å–∫—ñ–π –∫–∞—Ä—Ç–æ—Ç–µ—Ü—ñ!'
    });
});

// Error handler
app.use((err, req, res, next) => {
    console.error('üí• ERROR:', err);
    res.status(500).render('error', {
        title: '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ - –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç',
        error: process.env.NODE_ENV === 'production' ? '–©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫! –ë—É–¥—å –ª–∞—Å–∫–∞, —Å–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.' : err.message
    });
});

// –î–õ–Ø VERCEL - –≠–ö–°–ü–û–†–¢
export default app;

// –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
if (import.meta.url === `file://${process.argv[1]}`) {
    app.listen(PORT, () => {
        console.log(`üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ http://localhost:${PORT}`);
        console.log(`‚öñÔ∏è  –ê–¥–≤–æ–∫–∞—Ç –ì–µ—Ä–∞–ª—å—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏!`);
    });
}
